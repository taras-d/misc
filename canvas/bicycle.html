<!DOCTYPE html>
<html>
    <head>
        <title>Canvas - Bicycle</title>
    </head>
    <body>
    
        <canvas width="500" height="500" style="border: 1px dashed silver"></canvas>
        
        <script>
            
            var canvas = document.querySelector('canvas'),
                ctx = canvas.getContext('2d');
                
            canvas.onclick = function(e) {
                var rect = canvas.getBoundingClientRect();
                console.log(
                    e.clientX - rect.left, 
                    e.clientY - rect.top
                );
            }
            
            // Clear canvas
            function clear() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
                
            // Render bicycle wheel
            // x - x position
            // y - y position
            // r - radius
            // d - rotate degree
            function wheel(x, y, r, d) {
            
                ctx.save();
                
                // Move canvas origin to the center of wheel
                // and rotate on specified degree
                ctx.translate(x, y);
                ctx.rotate(d * Math.PI / 180);
                
                // Render circle
                ctx.beginPath();
                ctx.arc(0, 0, r, 0, 2 * Math.PI);
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // Render spokes
                var spokesAngle = 30,
                    spokesCount = 360 / spokesAngle;
                ctx.lineWidth = 1;
                for (var i = 0; i < spokesCount; ++i) {
                    ctx.rotate(spokesAngle * Math.PI / 180);
                    ctx.moveTo(0, 0);
                    ctx.lineTo(0, -r);
                    ctx.stroke();
                }
                
                ctx.restore();
            }
            
            // Render bicycle frame
            // x - x position
            // y - y position
            function frame(x, y) {
            
                ctx.save();
                
                ctx.lineCap = 'round';
                
                // Frame
                ctx.beginPath();
                ctx.moveTo(x + 35, y + 3);
                ctx.lineTo(x + 50, y + 80);
                ctx.lineTo(x, y + 70);
                ctx.lineTo(x + 38, y + 20);
                ctx.lineTo(x + 115, y + 16);
                ctx.lineTo(x + 50, y + 80);
                ctx.moveTo(x + 114, y + 6);
                ctx.lineTo(x + 135, y + 72);
                ctx.lineWidth = 3;
                ctx.strokeStyle = 'green';
                ctx.stroke();
                
                // Seat
                ctx.beginPath();
                ctx.moveTo(x + 20, y);
                ctx.lineTo(x + 50, y + 5);
                ctx.lineWidth = 4;
                ctx.strokeStyle = 'black';
                ctx.stroke();
                
                // Handlebar
                ctx.beginPath();
                ctx.moveTo(x + 100, y + 7);
                ctx.lineTo(x + 119, y + 5);
                ctx.lineWidth = 3;
                ctx.strokeStyle = 'black';
                ctx.stroke();
               
                ctx.restore();
            }
            
            // Render bicycle
            // x - x position
            // y - y position
            // d - wheel rotate degree
            function bicycle(x, y, d) {
                frame(x + 35, y);
                wheel(x + 35, y + 70, 35, d);
                wheel(x + 170, y + 70, 35, d);
            }
        
            var d = 0;
            setInterval(function() {
                clear();
                bicycle(135, 170, d);
                d = d < 360? d + 2: 0;
            });
        
        </script>
    
    </body>
</html>